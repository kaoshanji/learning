# Watch

Watch Service API是Java 7（NIO.2）中引入的，它是一种线程安全的服务，能够观察对象的变化和事件。

最常见的用途是监视目录是否有更改通过创建，删除和修改等操作来获取其内容。

您可能已经看到了这样的效果服务很多次。例如，当您在编辑器（例如GridinSoft记事本）中打开文本文件时，jEdit等），然后在编辑器外部修改文件内容，您将看到一条消息，询问是否您想重新加载该文件，因为它已被修改。

这意味着编辑器已检测到文件更改通过监视服务并相应地进行报告。

这称为文件更改通知机制，并从NIO.2开始，可以通过Watch Service API使用。

监视服务API是一种低级API，可以按原样使用或可以自定义。

你甚至可以在其之上编写一个高级API。

默认情况下，此API使用基础文件系统功能来观察文件系统的更改。

它允许您注册一个或多个要监视的目录您在注册过程中指定的各种通知事件。

当一个或多个监视服务检测到已注册的通知事件，监视服务通过通知通过单独的线程或线程池注册到处理这些事件的进程的事件。

从NIO.2开始，您不再需要轮询文件系统进行更改或使用其他内部文件监视文件系统更改的解决方案。 

在以前的Java版本中，您必须实现在一个单独的线程，用于跟踪受监视目录的所有内容，并不断轮询文件系统看看是否发生了重要的事情。 

现在，无论您运行的是Mac OS X，Linux，Unix，Windows，或某些其他操作系统，可以保证基础操作系统和文件系统提供允许Java注册以接收文件系统更改通知的必需功能。

在本章中，您将看到如何基于提供的Watch Service API开发应用程序。

实施功能性应用程序并不容易，因此我们将以最简单的情况开始应用程序监视单个目录中的更改。 

之后，您将看到如何递归监视您已注册要监视的目录树。 

此外，我们还将开发两个应用程序通用性较差，并封装了实际案例。 

为了帮助您入门，本章提供了一个概述编写基于Watch Service API的应用程序涉及的主要类。

----